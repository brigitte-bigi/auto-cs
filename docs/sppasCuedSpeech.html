<!DOCTYPE html>
<html>

        <head>
            
            <title>Auto-CS doc</title>

            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
            <meta name="description" content="Python Class Documentation of sppasCuedSpeech. SPPAS integration of the automatic Cued Speech key-code generation." />

            <link rel="logo icon" href="./statics/autocs32x32.ico" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/wexa.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/layout.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/book.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/menu.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/code.css" type="text/css" />
            <link rel="stylesheet" href="./statics/clamming.css" type="text/css" />

            <!-- Whakerexa JS loader: ES6 modules on http(s), bundle on file:// -->
            <script>
            (function () {
              const usingFile = (window.location.protocol === 'file:');
              const s = document.createElement('script');
            
              if (usingFile) {
                s.src = './Whakerexa-2.0/wexa_statics/js/wexa.bundle.js';
              } else {
                s.type = 'module';
                s.src = './Whakerexa-2.0/wexa_statics/js/wexa.js';
              }
            
              s.onload = function () {
                window.Wexa.onload.addLoadFunction(function () {
                  const book = new window.Wexa.Book("main-content");
                  book.fill_table(false);
                });
              };
            
              document.head.appendChild(s);
            })();
            </script>

       </head>
       
       <body class="light">
        <header>

            <a role="button" class="skip" href="#main-content" aria-label="Go to main content">
                Go to main content
            </a>
            <nav>
                <ul>
                    <li>
                        <button id="btn-contrast" role="menuitem" class="print-off" onclick="window.Wexa.accessibility.switch_contrast_scheme()" aria-label="Contrast">
                            <img class="nav-item-img" src="./Whakerexa-2.0/wexa_statics/icons/contrast_switcher.jpg" alt="Contrast" id="img-contrast"/>
                        </button>
                    </li>
                    <li>
                        <button id="btn-theme" class="print-off" role="menuitem" onclick="window.Wexa.accessibility.switch_color_scheme()" aria-label="Theme" >
                            <img class="nav-item-img" src="./Whakerexa-2.0/wexa_statics/icons/theme_switcher.png" alt="Theme" id="img-theme"/>
                        </button>
                    </li>
                </ul>
            </nav>
        
    <h1>Auto-CS 2.0</h1>
        <p><img class="small-logo" src="./statics/autocs.png" alt="Software logo"/></p>
        <p><a class="external-link" href="https://sourceforge.net/projects/autocs/">https://sourceforge.net/projects/autocs/</a></p>
    </header>
    <nav id="nav-book" class="side-nav">
    <h1>Auto-CS 2.0</h1>
    <img class="small-logo center" src="./statics/autocs.png" alt=""/>
        <p><a class="external-link" href="https://sourceforge.net/projects/autocs/">https://sourceforge.net/projects/autocs/</a></p>
    <ul>
<li><a role="button" tabindex="0" aria-disabled="true"> &crarr; Prev. Module</a></li>
<li><a role="button" tabindex="0" href="sppasAnnsOnFrames.html"> &uarr; Prev. Class</a></li>
<li><a role="button" tabindex="0" href="index.html"> &#8962; Index</a></li>
<li><a role="button" tabindex="0" aria-disabled="true"> &darr; Next Class</a></li>
<li><a role="button" tabindex="0" href="CuedSpeech.whatkey.html"> &rdsh; Next Module</a></li>
    </ul>
    <h2>Table of Contents</h2>
    <ul id="toc"></ul>
    <hr>
    <p><small>Automatically created</small></p><p><small>by <a class="external-link" href="https://clamming.sf.net">ClammingPy</a></small></p>
</nav>
    <main id="main-content">
    <section id="#CuedSpeech">    <h1>Module CuedSpeech</h1>
<section id="#sppasCuedSpeech">
<h2>Class sppasCuedSpeech</h2>

<section>
<h3 id="#description_sppasCuedSpeech">Description</h3>
    <article class="docstring">
<p><em>SPPAS integration of the automatic Cued Speech key-code generation.</em></p>

    </article>
</section>
<section>
<h3 id="#constructor_sppasCuedSpeech">Constructor</h3>
    <article class="docstring">
<p><em>Create a new instance.</em></p>

<p>Log is used for a better communication of the annotation process and its
results. If None, logs are redirected to the default logging system.</p>

<h5>Parameters</h5>

<ul>
<li><strong>log</strong>: (sppasLog) Human-readable logs.</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance.</span>

<span class="sd">    Log is used for a better communication of the annotation process and its</span>
<span class="sd">    results. If None, logs are redirected to the default logging system.</span>

<span class="sd">    :param log: (sppasLog) Human-readable logs.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">sppasCuedSpeech</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;cuedspeech.json&#39;</span><span class="p">,</span> <span class="n">log</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__lang</span> <span class="o">=</span> <span class="s1">&#39;und&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span> <span class="o">=</span> <span class="n">CuedSpeechKeys</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__genkey</span> <span class="o">=</span> <span class="n">sppasWhatKeyPredictor</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__genhand</span> <span class="o">=</span> <span class="n">sppasWhenHandTransitionPredictor</span><span class="p">(</span><span class="n">predictor_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;handtrans&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__gencue</span> <span class="o">=</span> <span class="n">sppasWhereCuePredictor</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__ann_on_media</span> <span class="o">=</span> <span class="n">sppasAnnsOnFrames</span><span class="p">(</span><span class="n">fps</span><span class="o">=</span><span class="mf">60.0</span><span class="p">)</span>
</code></pre></div>

    </details>


</section>
<section>
<h3 id="#public_fct_sppasCuedSpeech">Public functions</h3>
<h4>load_resources</h4>

    <article class="docstring">
<p><em>Fix the keys from a configuration file.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>config_filename</strong>: Name of the configuration file with the keys</li>
<li><strong>lang</strong>: (<em>str</em>) Iso639-3 of the language or "und" if unknown.</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_resources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_filename</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;und&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fix the keys from a configuration file.</span>

<span class="sd">        :param config_filename: Name of the configuration file with the keys</span>
<span class="sd">        :param lang: (str) Iso639-3 of the language or &quot;und&quot; if unknown.</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__lang</span> <span class="o">=</span> <span class="n">lang</span>
    <span class="k">if</span> <span class="n">lang</span> <span class="o">!=</span> <span class="s1">&#39;und&#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">config_filename</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__genkey</span><span class="o">.</span><span class="n">set_cue_rules</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__genhand</span><span class="o">.</span><span class="n">set_cue_rules</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__gencue</span><span class="o">.</span><span class="n">set_cue_rules</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;createvideo&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__set_video_tagger</span><span class="p">()</span>
</code></pre></div>

    </details>


<h4>fix_options</h4>

    <article class="docstring">
<p><em>Fix all options.</em></p>

<p>Available options are:</p>

<ul>
<li>inputpattern1, inputpattern2, inputpattern3, outputpattern,</li>
<li>createvideo: boolean</li>
<li>handtrans: version of the hand transition estimator model</li>
<li>handangle: version of the hand angle estimator model</li>
<li>handsset: name of the hand pictures set, or empty string to draw badges</li>
<li>angleface: boolean (hand angle is corrected by face angle)</li>
<li>infotext: boolean</li>
<li>vowelspos: boolean</li>
</ul>

<h5>Parameters</h5>

<ul>
<li><strong>options</strong>: (sppasOption)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fix_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fix all options.</span>

<span class="sd">        Available options are:</span>

<span class="sd">            - inputpattern1, inputpattern2, inputpattern3, outputpattern,</span>
<span class="sd">            - createvideo: boolean</span>
<span class="sd">            - handtrans: version of the hand transition estimator model</span>
<span class="sd">            - handangle: version of the hand angle estimator model</span>
<span class="sd">            - handsset: name of the hand pictures set, or empty string to draw badges</span>
<span class="sd">            - angleface: boolean (hand angle is corrected by face angle)</span>
<span class="sd">            - infotext: boolean</span>
<span class="sd">            - vowelspos: boolean</span>

<span class="sd">        :param options: (sppasOption)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">get_key</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;createvideo&#39;</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_create_video</span><span class="p">(</span><span class="n">opt</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
        <span class="k">elif</span> <span class="s1">&#39;pattern&#39;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
        <span class="k">elif</span> <span class="s1">&#39;handtrans&#39;</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_when_handtrans_version</span><span class="p">(</span><span class="n">opt</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
        <span class="k">elif</span> <span class="s1">&#39;handangle&#39;</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_where_handangle_version</span><span class="p">(</span><span class="n">opt</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
        <span class="k">elif</span> <span class="s1">&#39;handpos&#39;</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_where_handposition_version</span><span class="p">(</span><span class="n">opt</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
        <span class="k">elif</span> <span class="s1">&#39;angleface&#39;</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_where_angleface_correction</span><span class="p">(</span><span class="n">opt</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">CuedSpeechVideoTagger</span><span class="o">.</span><span class="n">OPTIONS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">opt</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AnnotationOptionError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>set_when_handtrans_version</h4>

    <article class="docstring">
<p><em>Fix the version of the hand transition times generator.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>version</strong>: (<em>int</em>)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_when_handtrans_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fix the version of the hand transition times generator.</span>

<span class="sd">        :param version: (int)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">all_versions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__genhand</span><span class="o">.</span><span class="n">get_whenpredictor_versions</span><span class="p">()</span>
    <span class="n">version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_versions</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid version number &#39;</span><span class="si">{}</span><span class="s2">&#39; for transition times. Expected one of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">version</span><span class="p">,</span> <span class="n">all_versions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logfile</span><span class="o">.</span><span class="n">print_message</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">annots</span><span class="o">.</span><span class="n">error</span><span class="p">)</span>
        <span class="n">version</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__genhand</span><span class="o">.</span><span class="n">set_whenpredictor_version</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;handtrans&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">version</span>
</code></pre></div>

    </details>


<h4>set_where_handposition_version</h4>

    <article class="docstring">
<p><em>Fix the version of the vowel' positions generator.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>version</strong>: (<em>int</em>)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_where_handposition_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fix the version of the vowel&#39; positions generator.</span>

<span class="sd">        :param version: (int)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">all_versions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gencue</span><span class="o">.</span><span class="n">get_wherepositionpredictor_versions</span><span class="p">()</span>
    <span class="n">version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_versions</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid version number &#39;</span><span class="si">{}</span><span class="s2">&#39; for vowels positions predictor. Expected one of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">version</span><span class="p">,</span> <span class="n">all_versions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logfile</span><span class="o">.</span><span class="n">print_message</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">annots</span><span class="o">.</span><span class="n">error</span><span class="p">)</span>
        <span class="n">version</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__gencue</span><span class="o">.</span><span class="n">set_wherepositionpredictor_version</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;handpos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">version</span>
</code></pre></div>

    </details>


<h4>set_where_handangle_version</h4>

    <article class="docstring">
<p><em>Fix the version of the hand angle generator.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>version</strong>: (<em>int</em>)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_where_handangle_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fix the version of the hand angle generator.</span>

<span class="sd">        :param version: (int)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">all_versions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gencue</span><span class="o">.</span><span class="n">get_whereanglepredictor_versions</span><span class="p">()</span>
    <span class="n">version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_versions</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid version number &#39;</span><span class="si">{}</span><span class="s2">&#39; for angle predictor. Expected one of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">version</span><span class="p">,</span> <span class="n">all_versions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logfile</span><span class="o">.</span><span class="n">print_message</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">annots</span><span class="o">.</span><span class="n">error</span><span class="p">)</span>
        <span class="n">version</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__gencue</span><span class="o">.</span><span class="n">set_whereanglepredictor_version</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;handangle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">version</span>
</code></pre></div>

    </details>


<h4>set_where_angleface_correction</h4>

    <article class="docstring">
<p><em>Whether correct tha hand angle or not with the face one.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>value</strong>: (<em>bool</em>)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_where_angleface_correction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Whether correct tha hand angle or not with the face one.</span>

<span class="sd">        :param value: (bool)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__gencue</span><span class="o">.</span><span class="n">set_angle_use_face</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;angleface&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div>

    </details>


<h4>set_create_video</h4>

    <article class="docstring">
<p><em>Fix the createvideo option.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>create</strong>: (<em>bool</em>)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_create_video</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fix the createvideo option.</span>

<span class="sd">        :param create: (bool)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">create</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">create</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;createvideo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">create</span>
    <span class="k">if</span> <span class="n">create</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__set_video_tagger</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    </details>


<h4>convert</h4>

    <article class="docstring">
<p><em>Syllabify labels of a time-aligned phones tier.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>phonemes</strong>: (sppasTier) time-aligned phonemes tier</li>
<li><strong>media</strong>: (sppasMedia) a media representing the video file</li>
</ul>

<h5>Returns</h5>

<ul>
<li>(sppasTier*6)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phonemes</span><span class="p">,</span> <span class="n">media</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Syllabify labels of a time-aligned phones tier.</span>

<span class="sd">        :param phonemes: (sppasTier) time-aligned phonemes tier</span>
<span class="sd">        :param media: (sppasMedia) a media representing the video file</span>
<span class="sd">        :returns: (sppasTier*6)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">cs_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__genkey</span><span class="o">.</span><span class="n">phons_to_segments</span><span class="p">(</span><span class="n">phonemes</span><span class="p">)</span>
    <span class="p">(</span><span class="n">cs_keys</span><span class="p">,</span> <span class="n">cs_class</span><span class="p">,</span> <span class="n">cs_struct</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__genkey</span><span class="o">.</span><span class="n">segments_to_keys</span><span class="p">(</span><span class="n">cs_segments</span><span class="p">,</span> <span class="n">phonemes</span><span class="o">.</span><span class="n">get_first_point</span><span class="p">(),</span> <span class="n">phonemes</span><span class="o">.</span><span class="n">get_last_point</span><span class="p">())</span>
    <span class="p">(</span><span class="n">cs_pos</span><span class="p">,</span> <span class="n">cs_shapes</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__genhand</span><span class="o">.</span><span class="n">when_hands</span><span class="p">(</span><span class="n">cs_keys</span><span class="p">,</span> <span class="n">cs_segments</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">cs_segments</span><span class="p">,</span> <span class="n">cs_keys</span><span class="p">,</span> <span class="n">cs_class</span><span class="p">,</span> <span class="n">cs_struct</span><span class="p">,</span> <span class="n">cs_shapes</span><span class="p">,</span> <span class="n">cs_pos</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>make_video</h4>

    <article class="docstring">
<p><em>Create a video with the tagged keys.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>video_file</strong>: (<em>str</em>) Filename of the given video</li>
<li><strong>trs</strong>: (sppasTranscription) All required tiers to tag the video</li>
<li><strong>output</strong>: (<em>str</em>) Output file name</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">make_video</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">video_file</span><span class="p">,</span> <span class="n">trs</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a video with the tagged keys.</span>

<span class="sd">        :param video_file: (str) Filename of the given video</span>
<span class="sd">        :param trs: (sppasTranscription) All required tiers to tag the video</span>
<span class="sd">        :param output: (str) Output file name</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">feature_installed</span><span class="p">(</span><span class="s1">&#39;video&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logfile</span><span class="o">.</span><span class="n">print_message</span><span class="p">(</span><span class="s1">&#39;Create the tagged video&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">annots</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">video_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span><span class="o">.</span><span class="n">tag_with_keys</span><span class="p">(</span><span class="n">trs</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logfile</span><span class="o">.</span><span class="n">print_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;To tag a video, the video support feature must be enabled (</span><span class="si">{</span><span class="n">cfg</span><span class="o">.</span><span class="n">feature_installed</span><span class="p">(</span><span class="s1">&#39;video&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">) and a video tagger must be instantiated (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kc">None</span><span class="si">}</span><span class="s2">).&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">annots</span><span class="o">.</span><span class="n">error</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>get_inputs</h4>

    <article class="docstring">
<p><em>Return the media and the annotated filenames.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>input_files</strong>: (<em>list</em>)</li>
</ul>

<h5>Raises</h5>

<p>NoInputError</p>

<h5>Returns</h5>

<ul>
<li>(<em>str</em>, <em>str</em>) Names of the 3 expected files</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_files</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the media and the annotated filenames.</span>

<span class="sd">        :param input_files: (list)</span>
<span class="sd">        :raise: NoInputError</span>
<span class="sd">        :return: (str, str) Names of the 3 expected files</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_extensions</span><span class="p">()</span>
    <span class="n">media_ext</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">ext</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
    <span class="n">phons_ext</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">ext</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
    <span class="n">sights_ext</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">ext</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
    <span class="n">media</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">annot_phons</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">annot_sights</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">pphones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;inputpattern1&#39;</span><span class="p">]</span>
    <span class="n">psights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;inputpattern3&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">input_files</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">fe</span><span class="p">)</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">media</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">fe</span> <span class="ow">in</span> <span class="n">media_ext</span><span class="p">:</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="k">elif</span> <span class="n">annot_phons</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">fe</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">phons_ext</span> <span class="ow">and</span> <span class="n">fn</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">pphones</span><span class="p">):</span>
            <span class="n">annot_phons</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="k">elif</span> <span class="n">annot_sights</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">fe</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">sights_ext</span> <span class="ow">and</span> <span class="n">fn</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">psights</span><span class="p">):</span>
            <span class="n">annot_sights</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="k">if</span> <span class="n">annot_phons</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;The annotated file with time-aligned phonemes was not found.&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">NoInputError</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">annot_phons</span><span class="p">,</span> <span class="n">annot_sights</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>create_media</h4>

    <article class="docstring">
<p><em>Create a sppasMedia() instance from a video filename.</em></p>
<h5>Parameters</h5>

<ul>
<li><strong>video_filename</strong></li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_media</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">video_filename</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a sppasMedia() instance from a video filename.</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">video_filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">extm</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">video_filename</span><span class="o">.</span><span class="n">lower</span><span class="p">())[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">video_media</span> <span class="o">=</span> <span class="n">sppasMedia</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">video_filename</span><span class="p">),</span> <span class="n">mime_type</span><span class="o">=</span><span class="s1">&#39;video/&#39;</span> <span class="o">+</span> <span class="n">extm</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">vid</span> <span class="o">=</span> <span class="n">sppasVideoReader</span><span class="p">()</span>
        <span class="n">vid</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">video_filename</span><span class="p">)</span>
        <span class="n">video_media</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;fps&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">vid</span><span class="o">.</span><span class="n">get_framerate</span><span class="p">()))</span>
        <span class="n">video_media</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">vid</span><span class="o">.</span><span class="n">get_duration</span><span class="p">()))</span>
        <span class="n">video_media</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">vid</span><span class="o">.</span><span class="n">get_size</span><span class="p">()))</span>
        <span class="n">vid</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">video_media</span>
</code></pre></div>

    </details>


<h4>run</h4>

    <article class="docstring">
<p><em>Run the automatic annotation process on an input.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>input_files</strong>: (<em>list</em> of <em>str</em>) time-aligned phonemes, and optionally video, csv files</li>
<li><strong>output</strong>: (<em>str</em>) the output name</li>
</ul>

<h5>Returns</h5>

<ul>
<li>(sppasTranscription)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_files</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the automatic annotation process on an input.</span>

<span class="sd">        :param input_files: (list of str) time-aligned phonemes, and optionally video, csv files</span>
<span class="sd">        :param output: (str) the output name</span>
<span class="sd">        :returns: (sppasTranscription)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">do_vid</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="p">(</span><span class="n">file_video</span><span class="p">,</span> <span class="n">file_phons</span><span class="p">,</span> <span class="n">file_sights</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_inputs</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span>
        <span class="n">video_media</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_media</span><span class="p">(</span><span class="n">file_video</span><span class="p">)</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">sppasTrsRW</span><span class="p">(</span><span class="n">file_phons</span><span class="p">)</span>
        <span class="n">trs_input</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">tier_phon</span> <span class="o">=</span> <span class="n">sppasFindTier</span><span class="o">.</span><span class="n">aligned_phones</span><span class="p">(</span><span class="n">trs_input</span><span class="p">)</span>
        <span class="n">trs_output</span> <span class="o">=</span> <span class="n">sppasTranscription</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_trs_metadata</span><span class="p">(</span><span class="n">trs_output</span><span class="p">,</span> <span class="n">file_phons</span><span class="p">)</span>
        <span class="p">(</span><span class="n">tier_cs</span><span class="p">,</span> <span class="n">tier_key</span><span class="p">,</span> <span class="n">tier_class</span><span class="p">,</span> <span class="n">tier_struct</span><span class="p">,</span> <span class="n">tier_shapes_transitions</span><span class="p">,</span> <span class="n">tier_pos_transitions</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">tier_phon</span><span class="p">,</span> <span class="n">video_media</span><span class="p">)</span>
        <span class="n">trs_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_cs</span><span class="p">)</span>
        <span class="n">trs_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_struct</span><span class="p">)</span>
        <span class="n">trs_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_key</span><span class="p">)</span>
        <span class="n">trs_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_class</span><span class="p">)</span>
        <span class="n">trs_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_shapes_transitions</span><span class="p">)</span>
        <span class="n">trs_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_pos_transitions</span><span class="p">)</span>
        <span class="n">trs_coords</span> <span class="o">=</span> <span class="n">sppasTranscription</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_trs_metadata</span><span class="p">(</span><span class="n">trs_coords</span><span class="p">,</span> <span class="n">file_phons</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">file_sights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">video_media</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">trs_coords</span><span class="o">.</span><span class="n">add_media</span><span class="p">(</span><span class="n">video_media</span><span class="p">)</span>
                <span class="n">adjusted_pos</span> <span class="o">=</span> <span class="n">tier_pos_transitions</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_media_to_tier</span><span class="p">(</span><span class="n">adjusted_pos</span><span class="p">,</span> <span class="n">video_media</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">trs_coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">adjusted_pos</span><span class="p">)</span>
                <span class="n">adjusted_shapes</span> <span class="o">=</span> <span class="n">tier_shapes_transitions</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_media_to_tier</span><span class="p">(</span><span class="n">adjusted_shapes</span><span class="p">,</span> <span class="n">video_media</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">trs_coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">adjusted_shapes</span><span class="p">)</span>
                <span class="n">trs_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gencue</span><span class="o">.</span><span class="n">predict_where</span><span class="p">(</span><span class="n">file_sights</span><span class="p">,</span> <span class="n">adjusted_pos</span><span class="p">,</span> <span class="n">adjusted_shapes</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">trs_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gencue</span><span class="o">.</span><span class="n">predict_where</span><span class="p">(</span><span class="n">file_sights</span><span class="p">,</span> <span class="n">tier_pos_transitions</span><span class="p">,</span> <span class="n">tier_shapes_transitions</span><span class="p">)</span>
            <span class="n">trs_coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_phon</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">tier</span> <span class="ow">in</span> <span class="n">trs_coords</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_media_to_tier</span><span class="p">(</span><span class="n">tier</span><span class="p">,</span> <span class="n">video_media</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;createvideo&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">file_video</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">file_sights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">do_vid</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">make_video</span><span class="p">(</span><span class="n">file_video</span><span class="p">,</span> <span class="n">trs_coords</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">do_vid</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logfile</span><span class="o">.</span><span class="n">print_message</span><span class="p">(</span><span class="s1">&#39;The option to tag the video was enabled but no video/csv corresponding to the annotated file </span><span class="si">{:s}</span><span class="s1"> was found.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">input_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">status</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;No sights available.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">trs_output</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">output_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fix_out_file_ext</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">trs_output</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">parser</span> <span class="o">=</span> <span class="n">sppasTrsRW</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">trs_output</span><span class="p">)</span>
            <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">EmptyOutputError</span>
        <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">coords_output</span> <span class="o">=</span> <span class="n">output_file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_output_pattern</span><span class="p">(),</span> <span class="s1">&#39;-coords&#39;</span><span class="p">)</span>
            <span class="n">parser</span> <span class="o">=</span> <span class="n">sppasTrsRW</span><span class="p">(</span><span class="n">coords_output</span><span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">trs_coords</span><span class="p">)</span>
            <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coords_output</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">traceback</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">raise</span>
    <span class="k">return</span> <span class="n">outputs</span>
</code></pre></div>

    </details>


<h4>get_output_pattern</h4>

    <article class="docstring">
<p><em>Pattern this annotation uses in an output filename.</em></p>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_output_pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pattern this annotation uses in an output filename.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;outputpattern&#39;</span><span class="p">,</span> <span class="s1">&#39;-cuedspeech&#39;</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>get_input_patterns</h4>

    <article class="docstring">
<p><em>Pattern this annotation expects for its input filename.</em></p>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_input_patterns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pattern this annotation expects for its input filename.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inputpattern1&#39;</span><span class="p">,</span> <span class="s1">&#39;-palign&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inputpattern2&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inputpattern3&#39;</span><span class="p">,</span> <span class="s1">&#39;-sights&#39;</span><span class="p">)]</span>
</code></pre></div>

    </details>


<h4>get_input_extensions</h4>

    <article class="docstring">
<p><em>Extensions that the annotation expects for its input filename.</em></p>

<p>Priority is given to video files, then image files.</p>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_input_extensions</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extensions that the annotation expects for its input filename.</span>

<span class="sd">        Priority is given to video files, then image files.</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">media_ext</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sppasFiles</span><span class="o">.</span><span class="n">get_informat_extensions</span><span class="p">(</span><span class="s1">&#39;VIDEO&#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">img_ext</span> <span class="ow">in</span> <span class="n">sppasFiles</span><span class="o">.</span><span class="n">get_informat_extensions</span><span class="p">(</span><span class="s1">&#39;IMAGE&#39;</span><span class="p">):</span>
        <span class="n">media_ext</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">img_ext</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">sppasFiles</span><span class="o">.</span><span class="n">get_informat_extensions</span><span class="p">(</span><span class="s1">&#39;ANNOT_ANNOT&#39;</span><span class="p">),</span> <span class="n">media_ext</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;.xra&#39;</span><span class="p">,</span> <span class="s1">&#39;.csv&#39;</span><span class="p">]]</span>
</code></pre></div>

    </details>


<h4>get_hands_sets</h4>

    <article class="docstring">
<p><em>List of all hands sets in the resources.cuedspeech folder.</em></p>

<h5>Returns</h5>

<ul>
<li>(<em>list</em>) A list of all hands sets available.</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_hands_sets</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List of all hands sets in the resources.cuedspeech folder.</span>

<span class="sd">        :return: (list) A list of all hands sets available.</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">hand_manager</span> <span class="o">=</span> <span class="n">sppasHandResource</span><span class="p">()</span>
    <span class="n">hand_manager</span><span class="o">.</span><span class="n">automatic_loading</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">hand_manager</span><span class="o">.</span><span class="n">get_hand_sets_identifiers</span><span class="p">()</span>
</code></pre></div>

    </details>


<h4>get_hands_filters</h4>

    <article class="docstring">
<p><em>List of all available hands filters.</em></p>

<h5>Returns</h5>

<ul>
<li>(<em>list</em>) A list of all hands filters.</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_hands_filters</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List of all available hands filters.</span>

<span class="sd">        :return: (list) A list of all hands filters.</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CuedSpeechVideoTagger</span><span class="o">.</span><span class="n">get_hands_filters</span><span class="p">()</span>
</code></pre></div>

    </details>


</section>
<section>
<h3 id="#private_fct_sppasCuedSpeech">Private functions</h3>
<h4>_set_media_to_tier</h4>

    <article class="docstring">
<p><em>Set the media to the tier and adjust annotation boundaries.</em></p>
<h5>Parameters</h5>

<ul>
<li><strong>tier</strong></li>
<li><strong>media</strong></li>
<li><strong>adjust</strong></li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_set_media_to_tier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the media to the tier and adjust annotation boundaries.</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">media</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">tier</span><span class="o">.</span><span class="n">set_media</span><span class="p">(</span><span class="n">media</span><span class="p">)</span>
    <span class="n">fps</span> <span class="o">=</span> <span class="n">media</span><span class="o">.</span><span class="n">get_meta</span><span class="p">(</span><span class="s1">&#39;fps&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fps</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">adjust</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ann_on_media</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="n">fps</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ann_on_media</span><span class="o">.</span><span class="n">adjust_boundaries</span><span class="p">(</span><span class="n">tier</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>_set_trs_metadata</h4>

    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_set_trs_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trs</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="n">trs</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;annotation_result_of&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="n">trs</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;language_iso&#39;</span><span class="p">,</span> <span class="s1">&#39;iso639-3&#39;</span><span class="p">)</span>
    <span class="n">trs</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;language_name_0&#39;</span><span class="p">,</span> <span class="s1">&#39;Undetermined&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lang</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">trs</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;language_code_0&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lang</span><span class="p">)</span>
        <span class="n">trs</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;language_url_0&#39;</span><span class="p">,</span> <span class="s1">&#39;https://iso639-3.sil.org/code/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lang</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">trs</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;language_code_0&#39;</span><span class="p">,</span> <span class="s1">&#39;und&#39;</span><span class="p">)</span>
        <span class="n">trs</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;language_url_0&#39;</span><span class="p">,</span> <span class="s1">&#39;https://iso639-3.sil.org/code/und&#39;</span><span class="p">)</span>
</code></pre></div>

    </details>


</section>
<section>
<h3 id="#protected_fct_sppasCuedSpeech">Protected functions</h3>
<h4>__set_video_tagger</h4>

    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__set_video_tagger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span> <span class="o">=</span> <span class="n">CuedSpeechVideoTagger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">CuedSpeechVideoTagger</span><span class="o">.</span><span class="n">OPTIONS</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span><span class="o">.</span><span class="n">set_cue_rules</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">sppasEnableFeatureError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__tagger</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Cued Speech Video Tagger can&#39;t be enabled: </span><span class="si">{:s}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</code></pre></div>

    </details>


</section>
</section>    </section>    </main>
    
            <footer>
                <p class="copyright">Copyright (C) 2022-2026 Brigitte Bigi, CNRS, Laboratoire Parole et Langage, Aix-en-Provence, France</p>
            </footer>
        
</body>
</html>
