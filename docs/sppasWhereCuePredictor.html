<!DOCTYPE html>
<html>

        <head>
            
            <title>Auto-CS doc</title>

            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
            <meta name="description" content="Python Class Documentation of sppasWhereCuePredictor. Create a tier indicating the position of 2 points of the hand." />

            <link rel="logo icon" href="./statics/autocs32x32.ico" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/wexa.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/layout.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/book.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/menu.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/code.css" type="text/css" />
            <link rel="stylesheet" href="./statics/clamming.css" type="text/css" />

            <!-- Whakerexa JS loader: ES6 modules on http(s), bundle on file:// -->
            <script>
            (function () {
              const usingFile = (window.location.protocol === 'file:');
              const s = document.createElement('script');
            
              if (usingFile) {
                s.src = './Whakerexa-2.0/wexa_statics/js/wexa.bundle.js';
              } else {
                s.type = 'module';
                s.src = './Whakerexa-2.0/wexa_statics/js/wexa.js';
              }
            
              s.onload = function () {
                window.Wexa.onload.addLoadFunction(function () {
                  const book = new window.Wexa.Book("main-content");
                  book.fill_table(false);
                });
              };
            
              document.head.appendChild(s);
            })();
            </script>

       </head>
       
       <body class="light">
        <header>

            <a role="button" class="skip" href="#main-content" aria-label="Go to main content">
                Go to main content
            </a>
            <nav>
                <ul>
                    <li>
                        <button id="btn-contrast" role="menuitem" class="print-off" onclick="window.Wexa.accessibility.switch_contrast_scheme()" aria-label="Contrast">
                            <img class="nav-item-img" src="./Whakerexa-2.0/wexa_statics/icons/contrast_switcher.jpg" alt="Contrast" id="img-contrast"/>
                        </button>
                    </li>
                    <li>
                        <button id="btn-theme" class="print-off" role="menuitem" onclick="window.Wexa.accessibility.switch_color_scheme()" aria-label="Theme" >
                            <img class="nav-item-img" src="./Whakerexa-2.0/wexa_statics/icons/theme_switcher.png" alt="Theme" id="img-theme"/>
                        </button>
                    </li>
                </ul>
            </nav>
        
    <h1>Auto-CS 2.0</h1>
        <p><img class="small-logo" src="./statics/autocs.png" alt="Software logo"/></p>
        <p><a class="external-link" href="https://sourceforge.net/projects/autocs/">https://sourceforge.net/projects/autocs/</a></p>
    </header>
    <nav id="nav-book" class="side-nav">
    <h1>Auto-CS 2.0</h1>
    <img class="small-logo center" src="./statics/autocs.png" alt=""/>
        <p><a class="external-link" href="https://sourceforge.net/projects/autocs/">https://sourceforge.net/projects/autocs/</a></p>
    <ul>
<li><a role="button" tabindex="0" href="CuedSpeech.whenhand.transition.html"> &crarr; Prev. Module</a></li>
<li><a role="button" tabindex="0" href="sppasWhereAnglesPredictor.html"> &uarr; Prev. Class</a></li>
<li><a role="button" tabindex="0" href="index.html"> &#8962; Index</a></li>
<li><a role="button" tabindex="0" aria-disabled="true"> &darr; Next Class</a></li>
<li><a role="button" tabindex="0" href="CuedSpeech.wherecue.angle.html"> &rdsh; Next Module</a></li>
    </ul>
    <h2>Table of Contents</h2>
    <ul id="toc"></ul>
    <hr>
    <p><small>Automatically created</small></p><p><small>by <a class="external-link" href="https://clamming.sf.net">ClammingPy</a></small></p>
</nav>
    <main id="main-content">
    <section id="#CuedSpeech.wherecue">    <h1>Module CuedSpeech.wherecue</h1>
<section id="#sppasWhereCuePredictor">
<h2>Class sppasWhereCuePredictor</h2>

<section>
<h3 id="#description_sppasWhereCuePredictor">Description</h3>
    <article class="docstring">
<p><em>Create a tier indicating the position of 2 points of the hand.</em></p>

<p>Predict the position of points S0 and S9 of an hand relatively to
sights of a face.</p>

    </article>
</section>
<section>
<h3 id="#constructor_sppasWhereCuePredictor">Constructor</h3>
    <article class="docstring">
<p><em>Create a new instance.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>cue_rules</strong>: (CuedSpeechKeys) Rules and codes for vowel positions and hand shapes</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos_predictor_version</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="n">WhereVowelPositionsPredictor</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span><span class="p">,</span> <span class="n">angle_predictor_version</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="n">WhereAnglesPredictor</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span><span class="p">,</span> <span class="n">cue_rules</span><span class="p">:</span> <span class="n">CuedSpeechCueingRules</span><span class="o">=</span><span class="n">CuedSpeechCueingRules</span><span class="p">()):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance.</span>

<span class="sd">    :param cue_rules: (CuedSpeechKeys) Rules and codes for vowel positions and hand shapes</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cue_rules</span><span class="p">,</span> <span class="n">CuedSpeechCueingRules</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">sppasTypeError</span><span class="p">(</span><span class="s1">&#39;cue_rules&#39;</span><span class="p">,</span> <span class="s1">&#39;CuedSpeechCueingRules&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__fps</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__pos_predictor</span> <span class="o">=</span> <span class="n">sppasWherePositionsPredictor</span><span class="p">(</span><span class="n">pos_predictor_version</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__angle_predictor</span> <span class="o">=</span> <span class="n">sppasWhereAnglesPredictor</span><span class="p">(</span><span class="n">angle_predictor_version</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__gentargets</span> <span class="o">=</span> <span class="n">TargetProbabilitiesEstimator</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_cue_rules</span><span class="p">(</span><span class="n">cue_rules</span><span class="p">)</span>
</code></pre></div>

    </details>


</section>
<section>
<h3 id="#public_fct_sppasWhereCuePredictor">Public functions</h3>
<h4>get_wherepositionpredictor_versions</h4>

    <article class="docstring">
<p><em>Return the list of version numbers of the vowel positions generator system.</em></p>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_wherepositionpredictor_versions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the list of version numbers of the vowel positions generator system.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pos_predictor</span><span class="o">.</span><span class="n">version_numbers</span><span class="p">()</span>
</code></pre></div>

    </details>


<h4>get_whereanglepredictor_versions</h4>

    <article class="docstring">
<p><em>Return the list of version numbers of the angles generation system.</em></p>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_whereanglepredictor_versions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the list of version numbers of the angles generation system.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_predictor</span><span class="o">.</span><span class="n">version_numbers</span><span class="p">()</span>
</code></pre></div>

    </details>


<h4>get_wherepositionpredictor_version</h4>

    <article class="docstring">
<p><em>Return the version number of the vowel positions prediction system.</em></p>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_wherepositionpredictor_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the version number of the vowel positions prediction system.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pos_predictor</span><span class="o">.</span><span class="n">get_version_number</span><span class="p">()</span>
</code></pre></div>

    </details>


<h4>get_whereanglepredictor_version</h4>

    <article class="docstring">
<p><em>Return the version number of the angle prediction system.</em></p>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_whereanglepredictor_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the version number of the angle prediction system.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_predictor</span><span class="o">.</span><span class="n">get_version_number</span><span class="p">()</span>
</code></pre></div>

    </details>


<h4>set_wherepositionpredictor_version</h4>

    <article class="docstring">
<p><em>Change the vowel position predictor version number.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>version_number</strong>: (<em>int</em>) One of the supported versions.</li>
</ul>

<h5>Raises</h5>

<ul>
<li><em>sppasKeyError</em>: if invalid version number</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_wherepositionpredictor_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Change the vowel position predictor version number.</span>

<span class="sd">        :param version_number: (int) One of the supported versions.</span>
<span class="sd">        :raises: sppasKeyError: if invalid version number</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__pos_predictor</span><span class="o">.</span><span class="n">set_version_number</span><span class="p">(</span><span class="n">version_number</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>set_whereanglepredictor_version</h4>

    <article class="docstring">
<p><em>Change the angle predictor version number.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>version_number</strong>: (<em>int</em>) One of the supported versions.</li>
</ul>

<h5>Raises</h5>

<ul>
<li><em>sppasKeyError</em>: if invalid version number</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_whereanglepredictor_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Change the angle predictor version number.</span>

<span class="sd">        :param version_number: (int) One of the supported versions.</span>
<span class="sd">        :raises: sppasKeyError: if invalid version number</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__angle_predictor</span><span class="o">.</span><span class="n">set_version_number</span><span class="p">(</span><span class="n">version_number</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>set_cue_rules</h4>

    <article class="docstring">
<p><em>Set new rules.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>cue_rules</strong>: (CuedSpeechCueingRules) Rules and codes for vowel positions and hand shapes</li>
</ul>

<h5>Raises</h5>

<ul>
<li><em>sppasTypeError</em>: given parameter is not CuedSpeechCueingRules</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_cue_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cue_rules</span><span class="p">:</span> <span class="n">CuedSpeechCueingRules</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set new rules.</span>

<span class="sd">        :param cue_rules: (CuedSpeechCueingRules) Rules and codes for vowel positions and hand shapes</span>
<span class="sd">        :raises: sppasTypeError: given parameter is not CuedSpeechCueingRules</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cue_rules</span><span class="p">,</span> <span class="n">CuedSpeechCueingRules</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">sppasTypeError</span><span class="p">(</span><span class="s1">&#39;cue_rules&#39;</span><span class="p">,</span> <span class="s1">&#39;CuedSpeechCueingRules&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span> <span class="o">=</span> <span class="n">cue_rules</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__gentargets</span><span class="o">.</span><span class="n">set_cue_rules</span><span class="p">(</span><span class="n">cue_rules</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>get_angle_use_face</h4>

    <article class="docstring">
<p><em>Return True if the hand angle must be corrected by the one of the face.</em></p>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_angle_use_face</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return True if the hand angle must be corrected by the one of the face.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_predictor</span><span class="o">.</span><span class="n">get_use_face</span><span class="p">()</span>
</code></pre></div>

    </details>


<h4>set_angle_use_face</h4>

    <article class="docstring">
<p><em>The angle of the hand is corrected by the one of the face or not.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>value</strong>: (<em>bool</em>) True if the angle of the hand has to be corrected.</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_angle_use_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The angle of the hand is corrected by the one of the face or not.</span>

<span class="sd">        :param value: (bool) True if the angle of the hand has to be corrected.</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__angle_predictor</span><span class="o">.</span><span class="n">set_use_face</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>predict_where</h4>

    <article class="docstring">
<p><em>Prodict where to cue, hand angle and hand size from face sights.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>file_sights</strong>: (<em>str</em>) Filename with 68 sights of a face for each image of a video</li>
<li><strong>tier<em>pos</em>transitions</strong>: (sppasTier) Predicted hand position transitions</li>
<li><strong>tier<em>shapes</em>transitions</strong>: (sppasTier) Predicted hand shapes transitions</li>
</ul>

<h5>Returns</h5>

<ul>
<li>(sppasTranscription)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">predict_where</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_sights</span><span class="p">,</span> <span class="n">tier_pos_transitions</span><span class="p">,</span> <span class="n">tier_shapes_transitions</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prodict where to cue, hand angle and hand size from face sights.</span>

<span class="sd">        :param file_sights: (str) Filename with 68 sights of a face for each image of a video</span>
<span class="sd">        :param tier_pos_transitions: (sppasTier) Predicted hand position transitions</span>
<span class="sd">        :param tier_shapes_transitions: (sppasTier) Predicted hand shapes transitions</span>
<span class="sd">        :return: (sppasTranscription)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">face_sights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_sights</span><span class="p">(</span><span class="n">file_sights</span><span class="p">,</span> <span class="n">kid_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__set_fps</span><span class="p">(</span><span class="n">face_sights</span><span class="p">)</span>
    <span class="n">tier_sizes</span> <span class="o">=</span> <span class="n">sppasFaceHeightGenerator</span><span class="p">(</span><span class="n">face_sights</span><span class="p">)</span><span class="o">.</span><span class="n">face_height</span><span class="p">(</span><span class="n">fps</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__fps</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__pos_predictor</span><span class="o">.</span><span class="n">set_sights</span><span class="p">(</span><span class="n">face_sights</span><span class="p">)</span>
    <span class="n">tier_pos_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pos_predictor</span><span class="o">.</span><span class="n">vowels_coords</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">get_vowels_codes</span><span class="p">(),</span> <span class="n">smooth_len</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__fps</span> <span class="o">//</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">tier_pos_probas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gentargets</span><span class="o">.</span><span class="n">positions_discretization</span><span class="p">(</span><span class="n">tier_pos_coords</span><span class="p">,</span> <span class="n">tier_pos_transitions</span><span class="p">)</span>
    <span class="n">tier_shp_probas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gentargets</span><span class="o">.</span><span class="n">shapes_discretization</span><span class="p">(</span><span class="n">tier_pos_coords</span><span class="p">,</span> <span class="n">tier_shapes_transitions</span><span class="p">)</span>
    <span class="n">tier_target_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gentargets</span><span class="o">.</span><span class="n">hands_to_target_coords</span><span class="p">(</span><span class="n">tier_pos_probas</span><span class="p">,</span> <span class="n">tier_pos_coords</span><span class="p">)</span>
    <span class="n">tier_angles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_predictor</span><span class="o">.</span><span class="n">hand_angles</span><span class="p">(</span><span class="n">tier_pos_probas</span><span class="p">,</span> <span class="n">face_sights</span><span class="p">)</span>
    <span class="n">trs</span> <span class="o">=</span> <span class="n">sppasTranscription</span><span class="p">(</span><span class="s1">&#39;WhereToCue&#39;</span><span class="p">)</span>
    <span class="n">trs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_pos_coords</span><span class="p">)</span>
    <span class="n">trs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_shp_probas</span><span class="p">)</span>
    <span class="n">trs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_pos_probas</span><span class="p">)</span>
    <span class="n">trs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_angles</span><span class="p">)</span>
    <span class="n">trs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_sizes</span><span class="p">)</span>
    <span class="n">trs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tier_target_coords</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">trs</span>
</code></pre></div>

    </details>


</section>
<section>
<h3 id="#private_fct_sppasWhereCuePredictor">Private functions</h3>
<h4>_load_sights</h4>

    <article class="docstring">
<p><em>Load a filename and store the sights of a given kid.</em></p>

<p>The returned data is a list of tuples with:</p>

<ul>
<li>at index 0: midpoint time value</li>
<li>at index 1: radius time value</li>
<li>at index 2: the 68 sights of a face</li>
</ul>

<h5>Parameters</h5>

<ul>
<li><strong>filename</strong>: (<em>str</em>) Filename of the XRA/CSV with sights</li>
<li><strong>kid_index</strong>: (<em>int</em>) index of the kid to get sights</li>
</ul>

<h5>Raises</h5>

<ul>
<li><em>sppasWhereCuedSightsValueError</em>: there are sights but there are not of the expected size</li>
<li><em>Exception</em></li>
</ul>

<h5>Returns</h5>

<ul>
<li>(<em>list</em>)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_load_sights</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">kid_index</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a filename and store the sights of a given kid.</span>

<span class="sd">        The returned data is a list of tuples with:</span>

<span class="sd">        - at index 0: midpoint time value</span>
<span class="sd">        - at index 1: radius time value</span>
<span class="sd">        - at index 2: the 68 sights of a face</span>

<span class="sd">        :param filename: (str) Filename of the XRA/CSV with sights</span>
<span class="sd">        :param kid_index: (int) index of the kid to get sights</span>
<span class="sd">        :raises: sppasWhereCuedSightsValueError: there are sights but there are not of the expected size</span>
<span class="sd">        :raises: Exception:</span>
<span class="sd">        :return: (list)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">sppasSightsVideoReader</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">cur_sights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_current_sights</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">kid_index</span><span class="p">)</span>
    <span class="n">data_sights</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">kids_sights</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">sights</span><span class="p">):</span>
        <span class="n">midpoint</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">midpoints</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">midpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;No time point value at index </span><span class="si">{:d}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">kids_sights</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">kid_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">kids_sights</span><span class="p">[</span><span class="n">kid_index</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">cur_sights</span> <span class="o">=</span> <span class="n">s</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;No estimated sights at frame number </span><span class="si">{:d}</span><span class="s1"> for kid </span><span class="si">{:d}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">kid_index</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;No estimated sights at frame number </span><span class="si">{:d}</span><span class="s1"> for kid </span><span class="si">{:d}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">kid_index</span><span class="p">))</span>
        <span class="n">data_sights</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">midpoint</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">radius</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cur_sights</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">data_sights</span>
</code></pre></div>

    </details>


</section>
<section>
<h3 id="#protected_fct_sppasWhereCuePredictor">Protected functions</h3>
<h4>__set_fps</h4>

    <article class="docstring">
<p><em>Fix the video frames-per-seconds value.</em></p>
<h5>Parameters</h5>

<ul>
<li><strong>data_sights</strong></li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__set_fps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_sights</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fix the video frames-per-seconds value.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_sights</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fps</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">first_midpoint</span> <span class="o">=</span> <span class="n">data_sights</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">first_midpoint</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Video fps=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__fps</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>__get_current_sights</h4>

    <article class="docstring">
<p><em>Return the sights at given index.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>data</strong>: (sppasSightsVideoReader) Video reader with sights</li>
<li><strong>kid_index</strong>: (<em>int</em>) index of the kid to get sights</li>
</ul>

<h5>Raises</h5>

<ul>
<li><em>sppasWhereCuedSightsValueError</em>: there are sights but there are not of the expected size</li>
<li><em>Exception</em></li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__get_current_sights</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">sppasSightsVideoReader</span><span class="p">,</span> <span class="n">kid_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sppasSights</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the sights at given index.</span>

<span class="sd">        :param data: (sppasSightsVideoReader) Video reader with sights</span>
<span class="sd">        :param kid_index: (int) index of the kid to get sights</span>
<span class="sd">        :raises: sppasWhereCuedSightsValueError: there are sights but there are not of the expected size</span>
<span class="sd">        :raises: Exception:</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">cur_sights</span> <span class="o">=</span> <span class="n">sppasSights</span><span class="p">()</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">kids_sights</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">sights</span><span class="p">):</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">kids_sights</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">kid_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">cur_sights</span> <span class="o">=</span> <span class="n">kids_sights</span><span class="p">[</span><span class="n">kid_index</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">cur_sights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>
    <span class="k">return</span> <span class="n">cur_sights</span>
</code></pre></div>

    </details>


</section>
</section>    </section>    </main>
    
            <footer>
                <p class="copyright">Copyright (C) 2022-2026 Brigitte Bigi, CNRS, Laboratoire Parole et Langage, Aix-en-Provence, France</p>
            </footer>
        
</body>
</html>
