<!DOCTYPE html>
<html>

        <head>
            
            <title>Auto-CS doc</title>

            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
            <meta name="description" content="Python Class Documentation of sppasWhatKeyPredictor. Cued Speech keys automatic generator from a sequence of phonemes." />

            <link rel="logo icon" href="./statics/autocs32x32.ico" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/wexa.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/layout.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/book.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/menu.css" type="text/css" />
            <link rel="stylesheet" href="./Whakerexa-2.0/wexa_statics/css/code.css" type="text/css" />
            <link rel="stylesheet" href="./statics/clamming.css" type="text/css" />

            <!-- Whakerexa JS loader: ES6 modules on http(s), bundle on file:// -->
            <script>
            (function () {
              const usingFile = (window.location.protocol === 'file:');
              const s = document.createElement('script');
            
              if (usingFile) {
                s.src = './Whakerexa-2.0/wexa_statics/js/wexa.bundle.js';
              } else {
                s.type = 'module';
                s.src = './Whakerexa-2.0/wexa_statics/js/wexa.js';
              }
            
              s.onload = function () {
                window.Wexa.onload.addLoadFunction(function () {
                  const book = new window.Wexa.Book("main-content");
                  book.fill_table(false);
                });
              };
            
              document.head.appendChild(s);
            })();
            </script>

       </head>
       
       <body class="light">
        <header>

            <a role="button" class="skip" href="#main-content" aria-label="Go to main content">
                Go to main content
            </a>
            <nav>
                <ul>
                    <li>
                        <button id="btn-contrast" role="menuitem" class="print-off" onclick="window.Wexa.accessibility.switch_contrast_scheme()" aria-label="Contrast">
                            <img class="nav-item-img" src="./Whakerexa-2.0/wexa_statics/icons/contrast_switcher.jpg" alt="Contrast" id="img-contrast"/>
                        </button>
                    </li>
                    <li>
                        <button id="btn-theme" class="print-off" role="menuitem" onclick="window.Wexa.accessibility.switch_color_scheme()" aria-label="Theme" >
                            <img class="nav-item-img" src="./Whakerexa-2.0/wexa_statics/icons/theme_switcher.png" alt="Theme" id="img-theme"/>
                        </button>
                    </li>
                </ul>
            </nav>
        
    <h1>Auto-CS 2.0</h1>
        <p><img class="small-logo" src="./statics/autocs.png" alt="Software logo"/></p>
        <p><a class="external-link" href="https://sourceforge.net/projects/autocs/">https://sourceforge.net/projects/autocs/</a></p>
    </header>
    <nav id="nav-book" class="side-nav">
    <h1>Auto-CS 2.0</h1>
    <img class="small-logo center" src="./statics/autocs.png" alt=""/>
        <p><a class="external-link" href="https://sourceforge.net/projects/autocs/">https://sourceforge.net/projects/autocs/</a></p>
    <ul>
<li><a role="button" tabindex="0" href="CuedSpeech.html"> &crarr; Prev. Module</a></li>
<li><a role="button" tabindex="0" href="CueingKeysByToken.html"> &uarr; Prev. Class</a></li>
<li><a role="button" tabindex="0" href="index.html"> &#8962; Index</a></li>
<li><a role="button" tabindex="0" aria-disabled="true"> &darr; Next Class</a></li>
<li><a role="button" tabindex="0" href="CuedSpeech.whenhand.html"> &rdsh; Next Module</a></li>
    </ul>
    <h2>Table of Contents</h2>
    <ul id="toc"></ul>
    <hr>
    <p><small>Automatically created</small></p><p><small>by <a class="external-link" href="https://clamming.sf.net">ClammingPy</a></small></p>
</nav>
    <main id="main-content">
    <section id="#CuedSpeech.whatkey">    <h1>Module CuedSpeech.whatkey</h1>
<section id="#sppasWhatKeyPredictor">
<h2>Class sppasWhatKeyPredictor</h2>

<section>
<h3 id="#description_sppasWhatKeyPredictor">Description</h3>
    <article class="docstring">
<p><em>Cued Speech keys automatic generator from a sequence of phonemes.</em></p>

    </article>
</section>
<section>
<h3 id="#constructor_sppasWhatKeyPredictor">Constructor</h3>
    <article class="docstring">
<p><em>Instantiate a CS generator.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>cue_rules</strong>: (CuedSpeechKeys) Rules to convert phonemes to keys</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cue_rules</span><span class="p">:</span> <span class="n">CuedSpeechKeys</span><span class="o">=</span><span class="n">CuedSpeechKeys</span><span class="p">()):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instantiate a CS generator.</span>

<span class="sd">    :param cue_rules: (CuedSpeechKeys) Rules to convert phonemes to keys</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_cue_rules</span><span class="p">(</span><span class="n">cue_rules</span><span class="p">)</span>
</code></pre></div>

    </details>


</section>
<section>
<h3 id="#public_fct_sppasWhatKeyPredictor">Public functions</h3>
<h4>set_cue_rules</h4>

    <article class="docstring">
<p><em>Set new rules.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>cue_rules</strong>: (CuedSpeechKeys) Rules and codes for vowel positions and hand shapes</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_cue_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cue_rules</span><span class="p">:</span> <span class="n">CuedSpeechKeys</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set new rules.</span>

<span class="sd">        :param cue_rules: (CuedSpeechKeys) Rules and codes for vowel positions and hand shapes</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cue_rules</span><span class="p">,</span> <span class="n">CuedSpeechKeys</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">sppasTypeError</span><span class="p">(</span><span class="s1">&#39;cue_rules&#39;</span><span class="p">,</span> <span class="s1">&#39;CuedSpeechKeys&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span> <span class="o">=</span> <span class="n">cue_rules</span>
</code></pre></div>

    </details>


<h4>phons_to_segments</h4>

    <article class="docstring">
<p><em>Convert time-aligned phonemes into CS segments.</em></p>

<p>PhonAlign:            |  b   | O~ |  Z |  u |  R   |
CS-PhonSegments:      |  b O~     |  Z u    |  R   |</p>

<h5>Parameters</h5>

<ul>
<li><strong>phonemes</strong>: (sppasTier) time-aligned phonemes tier</li>
</ul>

<h5>Returns</h5>

<ul>
<li>(sppasTier) Phonemes grouped into key segments</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">phons_to_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phonemes</span><span class="p">:</span> <span class="n">sppasTier</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sppasTier</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert time-aligned phonemes into CS segments.</span>

<span class="sd">        PhonAlign:            |  b   | O~ |  Z |  u |  R   |</span>
<span class="sd">        CS-PhonSegments:      |  b O~     |  Z u    |  R   |</span>

<span class="sd">        :param phonemes: (sppasTier) time-aligned phonemes tier</span>
<span class="sd">        :return: (sppasTier) Phonemes grouped into key segments</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">phonemes</span><span class="p">,</span> <span class="n">sppasTier</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">sppasTypeError</span><span class="p">(</span><span class="s1">&#39;phons&#39;</span><span class="p">,</span> <span class="s1">&#39;sppasTier&#39;</span><span class="p">)</span>
    <span class="n">segments_tier</span> <span class="o">=</span> <span class="n">sppasTier</span><span class="p">(</span><span class="s1">&#39;CS-PhonSegments&#39;</span><span class="p">)</span>
    <span class="n">segments_tier</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;cued_speech_segments_of_tier&#39;</span><span class="p">,</span> <span class="n">phonemes</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
    <span class="n">intervals</span> <span class="o">=</span> <span class="n">sppasWhatKeyPredictor</span><span class="o">.</span><span class="n">_phon_to_intervals</span><span class="p">(</span><span class="n">phonemes</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">:</span>
        <span class="n">start_phon_idx</span> <span class="o">=</span> <span class="n">phonemes</span><span class="o">.</span><span class="n">lindex</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">get_lowest_localization</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">start_phon_idx</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">start_phon_idx</span> <span class="o">=</span> <span class="n">phonemes</span><span class="o">.</span><span class="n">mindex</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">get_lowest_localization</span><span class="p">(),</span> <span class="n">bound</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">end_phon_idx</span> <span class="o">=</span> <span class="n">phonemes</span><span class="o">.</span><span class="n">rindex</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">get_highest_localization</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">end_phon_idx</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">end_phon_idx</span> <span class="o">=</span> <span class="n">phonemes</span><span class="o">.</span><span class="n">mindex</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">get_highest_localization</span><span class="p">(),</span> <span class="n">bound</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start_phon_idx</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">end_phon_idx</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__gen_key_segments</span><span class="p">(</span><span class="n">phonemes</span><span class="p">,</span> <span class="n">start_phon_idx</span><span class="p">,</span> <span class="n">end_phon_idx</span><span class="p">,</span> <span class="n">segments_tier</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">info</span><span class="p">(</span><span class="mi">1224</span><span class="p">,</span> <span class="s1">&#39;annotations&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">interval</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">segments_tier</span>
</code></pre></div>

    </details>


<h4>segments_to_keys</h4>

    <article class="docstring">
<p><em>Create tiers with the CS denomination and the class of each phoneme.</em></p>

<p>CS-PhonSegments:      |  b O~     |  Z u    |   R   |   #   |
CS-PhonStructs:       |  C V      |  C V    |   C   |       |
CS-Keys:              |  4 m      |  1 c    |  3 n  |  0 n  |
CS-KeysClass:         |  C V      |  C V    |  C N  |  N N  |</p>

<h5>Parameters</h5>

<ul>
<li><strong>segments</strong>: (sppasTier) A tier in which key segments</li>
<li><strong>start_point</strong>: (sppasPo<em>int</em>)</li>
<li><strong>end_point</strong>: (sppasPo<em>int</em>)</li>
</ul>

<h5>Returns</h5>

<ul>
<li>(sppasTier, sppasTier, sppasTier) CS-Keys CS-KeysClass CS-PhonStructs</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">segments_to_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">:</span> <span class="n">sppasTier</span><span class="p">,</span> <span class="n">start_point</span><span class="p">:</span> <span class="n">sppasPoint</span> <span class="o">|</span> <span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_point</span><span class="p">:</span> <span class="n">sppasPoint</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create tiers with the CS denomination and the class of each phoneme.</span>

<span class="sd">        CS-PhonSegments:      |  b O~     |  Z u    |   R   |   #   |</span>
<span class="sd">        CS-PhonStructs:       |  C V      |  C V    |   C   |       |</span>
<span class="sd">        CS-Keys:              |  4 m      |  1 c    |  3 n  |  0 n  |</span>
<span class="sd">        CS-KeysClass:         |  C V      |  C V    |  C N  |  N N  |</span>

<span class="sd">        :param segments: (sppasTier) A tier in which key segments</span>
<span class="sd">        :param start_point: (sppasPoint)</span>
<span class="sd">        :param end_point: (sppasPoint)</span>
<span class="sd">        :returns: (sppasTier, sppasTier, sppasTier) CS-Keys CS-KeysClass CS-PhonStructs</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">key_tier</span> <span class="o">=</span> <span class="n">sppasTier</span><span class="p">(</span><span class="s1">&#39;CS-Keys&#39;</span><span class="p">)</span>
    <span class="n">key_tier</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;cued_speech_key_of_tier&#39;</span><span class="p">,</span> <span class="n">segments</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
    <span class="n">class_tier</span> <span class="o">=</span> <span class="n">sppasTier</span><span class="p">(</span><span class="s1">&#39;CS-KeysClass&#39;</span><span class="p">)</span>
    <span class="n">class_tier</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;cued_speech_phonclass_of_tier&#39;</span><span class="p">,</span> <span class="n">segments</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
    <span class="n">struct_tier</span> <span class="o">=</span> <span class="n">sppasTier</span><span class="p">(</span><span class="s1">&#39;CS-PhonStructs&#39;</span><span class="p">)</span>
    <span class="n">struct_tier</span><span class="o">.</span><span class="n">set_meta</span><span class="p">(</span><span class="s1">&#39;cued_speech_struct_of_tier&#39;</span><span class="p">,</span> <span class="n">segments</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">ann</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
        <span class="n">phons</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">phons</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;A CS key should contain at least one phoneme.Got </span><span class="si">{:d}</span><span class="s1"> instead.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">phons</span><span class="p">)))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">phons</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;A CS key should contain at max two phonemes.Got </span><span class="si">{:d}</span><span class="s1"> instead.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">phons</span><span class="p">)))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">phons</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">phons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_best</span><span class="p">()</span><span class="o">.</span><span class="n">get_content</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">get_class</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;V&#39;</span><span class="p">:</span>
                <span class="n">phons</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="s1">&#39;cnil&#39;</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">get_class</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
                <span class="n">phons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="s1">&#39;vnil&#39;</span><span class="p">)))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">phons</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="n">symbols</span><span class="o">.</span><span class="n">unk</span><span class="p">)))</span>
        <span class="n">consonant</span> <span class="o">=</span> <span class="n">phons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_best</span><span class="p">()</span><span class="o">.</span><span class="n">get_content</span><span class="p">()</span>
        <span class="n">consonant_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">get_class</span><span class="p">(</span><span class="n">consonant</span><span class="p">)</span>
        <span class="n">vowel</span> <span class="o">=</span> <span class="n">phons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_best</span><span class="p">()</span><span class="o">.</span><span class="n">get_content</span><span class="p">()</span>
        <span class="n">vowel_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">get_class</span><span class="p">(</span><span class="n">vowel</span><span class="p">)</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_labels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">consonant</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">vowel</span><span class="p">),</span> <span class="n">phons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_key</span><span class="p">(),</span> <span class="n">phons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_key</span><span class="p">())</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">a1</span><span class="o">.</span><span class="n">set_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="n">key_tier</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_labels</span><span class="p">(</span><span class="n">consonant_class</span><span class="p">,</span> <span class="n">vowel_class</span><span class="p">,</span> <span class="n">phons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_key</span><span class="p">(),</span> <span class="n">phons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_key</span><span class="p">())</span>
        <span class="n">a2</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">a2</span><span class="o">.</span><span class="n">set_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="n">class_tier</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_labels</span><span class="p">(</span><span class="n">consonant_class</span> <span class="k">if</span> <span class="n">consonant_class</span> <span class="o">!=</span> <span class="s1">&#39;N&#39;</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">vowel_class</span> <span class="k">if</span> <span class="n">vowel_class</span> <span class="o">!=</span> <span class="s1">&#39;N&#39;</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">phons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_key</span><span class="p">(),</span> <span class="n">phons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_key</span><span class="p">())</span>
        <span class="n">a3</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">a3</span><span class="o">.</span><span class="n">set_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="n">struct_tier</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a3</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__fill_key_segments</span><span class="p">(</span><span class="n">key_tier</span><span class="p">,</span> <span class="n">class_tier</span><span class="p">,</span> <span class="n">start_point</span><span class="p">,</span> <span class="n">end_point</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">key_tier</span><span class="p">,</span> <span class="n">class_tier</span><span class="p">,</span> <span class="n">struct_tier</span><span class="p">)</span>
</code></pre></div>

    </details>


</section>
<section>
<h3 id="#private_fct_sppasWhatKeyPredictor">Private functions</h3>
<h4>_phon_to_intervals</h4>

    <article class="docstring">
<p><em>Create a tier with only the intervals to be syllabified.</em></p>

<p>We could use symbols.phone only, but for backward compatibility,
the symbols used in previous versions of SPPAS are added here.</p>

<h5>Parameters</h5>

<ul>
<li><strong>phonemes</strong>: (sppasTier)</li>
</ul>

<h5>Returns</h5>

<ul>
<li>a tier with consecutive filled intervals.</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_phon_to_intervals</span><span class="p">(</span><span class="n">phonemes</span><span class="p">:</span> <span class="n">sppasTier</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sppasTier</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a tier with only the intervals to be syllabified.</span>

<span class="sd">        We could use symbols.phone only, but for backward compatibility,</span>
<span class="sd">        the symbols used in previous versions of SPPAS are added here.</span>

<span class="sd">        :param phonemes: (sppasTier)</span>
<span class="sd">        :return: a tier with consecutive filled intervals.</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">stop</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">symbols</span><span class="o">.</span><span class="n">phone</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">stop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>
    <span class="n">stop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;@@&#39;</span><span class="p">)</span>
    <span class="n">stop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
    <span class="n">stop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;gb&#39;</span><span class="p">)</span>
    <span class="n">stop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;lg&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">phonemes</span><span class="o">.</span><span class="n">export_to_intervals</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
</code></pre></div>

    </details>


</section>
<section>
<h3 id="#protected_fct_sppasWhatKeyPredictor">Protected functions</h3>
<h4>__gen_key_segments</h4>

    <article class="docstring">
<p><em>Perform the key generation of a sequence of phonemes.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>tier_palign</strong>: (sppasTier) Time-aligned phonemes</li>
<li><strong>from_p</strong>: (<em>int</em>) index of the first phoneme to be syllabified</li>
<li><strong>to_p</strong>: (<em>int</em>) index of the last phoneme to be syllabified</li>
<li><strong>tier<em>key</em>segs</strong>: (sppasTier)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__gen_key_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tier_palign</span><span class="p">,</span> <span class="n">from_p</span><span class="p">,</span> <span class="n">to_p</span><span class="p">,</span> <span class="n">tier_key_segs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Perform the key generation of a sequence of phonemes.</span>

<span class="sd">        :param tier_palign: (sppasTier) Time-aligned phonemes</span>
<span class="sd">        :param from_p: (int) index of the first phoneme to be syllabified</span>
<span class="sd">        :param to_p: (int) index of the last phoneme to be syllabified</span>
<span class="sd">        :param tier_key_segs: (sppasTier)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">phons</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ann</span> <span class="ow">in</span> <span class="n">tier_palign</span><span class="p">[</span><span class="n">from_p</span><span class="p">:</span><span class="n">to_p</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_best_tag</span><span class="p">()</span>
        <span class="n">phons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">get_typed_content</span><span class="p">())</span>
    <span class="n">syll_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">syllabify</span><span class="p">(</span><span class="n">phons</span><span class="p">)</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">syll</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">syll_keys</span><span class="p">):</span>
        <span class="p">(</span><span class="n">start_idx</span><span class="p">,</span> <span class="n">end_idx</span><span class="p">)</span> <span class="o">=</span> <span class="n">syll</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="n">tier_palign</span><span class="p">[</span><span class="n">start_idx</span> <span class="o">+</span> <span class="n">from_p</span><span class="p">]</span><span class="o">.</span><span class="n">get_lowest_localization</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">a3</span> <span class="o">=</span> <span class="n">tier_palign</span><span class="p">[</span><span class="n">end_idx</span> <span class="o">+</span> <span class="n">from_p</span><span class="p">]</span><span class="o">.</span><span class="n">get_highest_localization</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">location</span> <span class="o">=</span> <span class="n">sppasLocation</span><span class="p">(</span><span class="n">sppasInterval</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a3</span><span class="p">))</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ann</span> <span class="ow">in</span> <span class="n">tier_palign</span><span class="p">[</span><span class="n">from_p</span> <span class="o">+</span> <span class="n">start_idx</span><span class="p">:</span><span class="n">from_p</span> <span class="o">+</span> <span class="n">end_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="n">tag</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_best_tag</span><span class="p">()</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
            <span class="n">label</span><span class="o">.</span><span class="n">set_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">ann</span><span class="o">.</span><span class="n">get_id</span><span class="p">())</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">tier_key_segs</span><span class="o">.</span><span class="n">create_annotation</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tier_key_segs</span>
</code></pre></div>

    </details>


<h4>__fill_key_segments</h4>

    <article class="docstring">
<p><em>Fill the gaps with the neutral shape and neutral position.</em></p>

<h5>Parameters</h5>

<ul>
<li><strong>tier_keys</strong>: (sppasTier)</li>
<li><strong>tier_class</strong>: (sppasTier)</li>
</ul>

    </article>


    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__fill_key_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tier_keys</span><span class="p">,</span> <span class="n">tier_class</span><span class="p">,</span> <span class="n">start_point</span><span class="p">,</span> <span class="n">end_point</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fill the gaps with the neutral shape and neutral position.</span>

<span class="sd">        :param tier_keys: (sppasTier)</span>
<span class="sd">        :param tier_class: (sppasTier)</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tier_keys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">cn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">get_neutral_consonant</span><span class="p">()</span>
    <span class="n">vn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">get_neutral_vowel</span><span class="p">()</span>
    <span class="n">prev</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prev_shape_key</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prev_pos_key</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prev_shape_class</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prev_pos_class</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">current_pos_key</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">current_shape_key</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">start_point</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">tier_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_lowest_localization</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">start_point</span><span class="p">:</span>
        <span class="n">interval</span> <span class="o">=</span> <span class="n">sppasInterval</span><span class="p">(</span><span class="n">start_point</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">tier_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_lowest_localization</span><span class="p">())</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="n">cn</span><span class="p">)),</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="n">vn</span><span class="p">))]</span>
        <span class="n">annotation</span> <span class="o">=</span> <span class="n">sppasAnnotation</span><span class="p">(</span><span class="n">sppasLocation</span><span class="p">(</span><span class="n">interval</span><span class="p">),</span> <span class="n">labels</span><span class="p">)</span>
        <span class="n">tier_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
        <span class="n">prev_shape_key</span> <span class="o">=</span> <span class="n">cn</span>
        <span class="n">prev_pos_key</span> <span class="o">=</span> <span class="n">vn</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">NEUTRAL_CLASS</span><span class="p">)),</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">NEUTRAL_CLASS</span><span class="p">))]</span>
        <span class="n">annotation</span> <span class="o">=</span> <span class="n">sppasAnnotation</span><span class="p">(</span><span class="n">sppasLocation</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">copy</span><span class="p">()),</span> <span class="n">labels</span><span class="p">)</span>
        <span class="n">tier_class</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
        <span class="n">prev_shape_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">NEUTRAL_CLASS</span>
        <span class="n">prev_pos_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">NEUTRAL_CLASS</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">ac</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">tier_keys</span><span class="p">,</span> <span class="n">tier_class</span><span class="p">):</span>
        <span class="n">fill_hole</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">prev</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">prev</span><span class="o">.</span><span class="n">get_highest_localization</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">a</span><span class="o">.</span><span class="n">get_lowest_localization</span><span class="p">():</span>
            <span class="n">interval</span> <span class="o">=</span> <span class="n">sppasInterval</span><span class="p">(</span><span class="n">prev</span><span class="o">.</span><span class="n">get_highest_localization</span><span class="p">(),</span> <span class="n">a</span><span class="o">.</span><span class="n">get_lowest_localization</span><span class="p">())</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">interval</span><span class="o">.</span><span class="n">duration</span><span class="p">()</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">prev_shape_key</span> <span class="o">==</span> <span class="s1">&#39;s&#39;</span> <span class="ow">and</span> <span class="n">duration</span> <span class="o">&gt;</span> <span class="n">sppasWhatKeyPredictor</span><span class="o">.</span><span class="n">NEUTRAL_SHAPE_THRESHOLD</span><span class="p">:</span>
                <span class="n">current_shape_key</span> <span class="o">=</span> <span class="n">cn</span>
                <span class="n">current_shape_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">NEUTRAL_CLASS</span>
                <span class="n">fill_hole</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">current_shape_key</span> <span class="o">=</span> <span class="n">prev_shape_key</span>
                <span class="n">current_shape_class</span> <span class="o">=</span> <span class="n">prev_shape_class</span>
            <span class="k">if</span> <span class="n">prev_pos_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">duration</span> <span class="o">&gt;</span> <span class="n">sppasWhatKeyPredictor</span><span class="o">.</span><span class="n">NEUTRAL_POSITION_THRESHOLD</span><span class="p">:</span>
                <span class="n">current_pos_key</span> <span class="o">=</span> <span class="n">vn</span>
                <span class="n">current_pos_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">NEUTRAL_CLASS</span>
                <span class="n">fill_hole</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">current_shape_key</span> <span class="o">=</span> <span class="n">cn</span>
                <span class="n">current_shape_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">NEUTRAL_CLASS</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">current_pos_key</span> <span class="o">=</span> <span class="n">prev_pos_key</span>
                <span class="n">current_pos_class</span> <span class="o">=</span> <span class="n">prev_pos_class</span>
            <span class="k">if</span> <span class="n">fill_hole</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="n">current_shape_key</span><span class="p">)),</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="n">current_pos_key</span><span class="p">))]</span>
                <span class="n">annotation</span> <span class="o">=</span> <span class="n">sppasAnnotation</span><span class="p">(</span><span class="n">sppasLocation</span><span class="p">(</span><span class="n">interval</span><span class="p">),</span> <span class="n">labels</span><span class="p">)</span>
                <span class="n">tier_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="n">current_shape_class</span><span class="p">)),</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="n">current_pos_class</span><span class="p">))]</span>
                <span class="n">annotation</span> <span class="o">=</span> <span class="n">sppasAnnotation</span><span class="p">(</span><span class="n">sppasLocation</span><span class="p">(</span><span class="n">interval</span><span class="p">),</span> <span class="n">labels</span><span class="p">)</span>
                <span class="n">tier_class</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
                <span class="n">prev</span> <span class="o">=</span> <span class="n">annotation</span>
                <span class="n">prev_shape_key</span> <span class="o">=</span> <span class="n">current_shape_key</span>
                <span class="n">prev_shape_class</span> <span class="o">=</span> <span class="n">current_shape_class</span>
                <span class="n">prev_pos_key</span> <span class="o">=</span> <span class="n">current_pos_key</span>
                <span class="n">prev_pos_class</span> <span class="o">=</span> <span class="n">current_pos_class</span>
        <span class="k">if</span> <span class="n">fill_hole</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">a</span>
            <span class="n">prev_shape_key</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_best</span><span class="p">()</span><span class="o">.</span><span class="n">get_content</span><span class="p">()</span>
            <span class="n">prev_shape_class</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_best</span><span class="p">()</span><span class="o">.</span><span class="n">get_content</span><span class="p">()</span>
            <span class="n">prev_pos_key</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_best</span><span class="p">()</span><span class="o">.</span><span class="n">get_content</span><span class="p">()</span>
            <span class="n">prev_pos_class</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_best</span><span class="p">()</span><span class="o">.</span><span class="n">get_content</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">end_point</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">tier_keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_highest_localization</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">end_point</span><span class="p">:</span>
        <span class="n">interval</span> <span class="o">=</span> <span class="n">sppasInterval</span><span class="p">(</span><span class="n">tier_keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_highest_localization</span><span class="p">(),</span> <span class="n">end_point</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="n">cn</span><span class="p">)),</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="n">vn</span><span class="p">))]</span>
        <span class="n">annotation</span> <span class="o">=</span> <span class="n">sppasAnnotation</span><span class="p">(</span><span class="n">sppasLocation</span><span class="p">(</span><span class="n">interval</span><span class="p">),</span> <span class="n">labels</span><span class="p">)</span>
        <span class="n">tier_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">NEUTRAL_CLASS</span><span class="p">)),</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">sppasTag</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cued</span><span class="o">.</span><span class="n">NEUTRAL_CLASS</span><span class="p">))]</span>
        <span class="n">annotation</span> <span class="o">=</span> <span class="n">sppasAnnotation</span><span class="p">(</span><span class="n">sppasLocation</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">copy</span><span class="p">()),</span> <span class="n">labels</span><span class="p">)</span>
        <span class="n">tier_class</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
</code></pre></div>

    </details>


<h4>__create_labels</h4>

    <details>
    <summary>
View Source
    </summary>
<div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__create_labels</span><span class="p">(</span><span class="n">consonant</span><span class="p">,</span> <span class="n">vowel</span><span class="p">,</span> <span class="n">ann_key_c</span><span class="p">,</span> <span class="n">ann_key_v</span><span class="p">):</span>
    <span class="n">tag_c</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">consonant</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tag_c</span> <span class="o">=</span> <span class="n">sppasTag</span><span class="p">(</span><span class="n">consonant</span><span class="p">)</span>
    <span class="n">tag_v</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">vowel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tag_v</span> <span class="o">=</span> <span class="n">sppasTag</span><span class="p">(</span><span class="n">vowel</span><span class="p">)</span>
    <span class="n">cs_c</span> <span class="o">=</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">tag_c</span><span class="p">)</span>
    <span class="n">cs_c</span><span class="o">.</span><span class="n">set_key</span><span class="p">(</span><span class="n">ann_key_c</span><span class="p">)</span>
    <span class="n">cs_v</span> <span class="o">=</span> <span class="n">sppasLabel</span><span class="p">(</span><span class="n">tag_v</span><span class="p">)</span>
    <span class="n">cs_v</span><span class="o">.</span><span class="n">set_key</span><span class="p">(</span><span class="n">ann_key_v</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">cs_c</span><span class="p">,</span> <span class="n">cs_v</span><span class="p">]</span>
</code></pre></div>

    </details>


</section>
</section>    </section>    </main>
    
            <footer>
                <p class="copyright">Copyright (C) 2022-2026 Brigitte Bigi, CNRS, Laboratoire Parole et Langage, Aix-en-Provence, France</p>
            </footer>
        
</body>
</html>
